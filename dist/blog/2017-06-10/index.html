<!DOCTYPE html><html><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/></head><body><div id="PhenomicRoot"><div data-reactroot="" data-reactid="1" data-react-checksum="1209247649"><!-- react-empty: 2 --><header data-reactid="3"><div class="header" data-reactid="4"><div class="header-left" data-reactid="5"><div class="header-icon" data-reactid="6"><img src="/laforest-icon-144.png" data-reactid="7"/></div><h4 class="header-name" data-reactid="8">Scott LaForest</h4><p data-reactid="9">Web Developer</p></div><div class="header-right" data-reactid="10"><div style="display:inline-block;position:relative;" data-reactid="11"><button style="border:10px;box-sizing:border-box;display:inline-block;font-family:Roboto, sans-serif;-webkit-tap-highlight-color:rgba(0, 0, 0, 0);cursor:pointer;text-decoration:none;margin:0;padding:12px;outline:none;font-size:0;font-weight:inherit;position:relative;z-index:1;overflow:visible;transition:all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;width:48px;height:48px;background:none;-moz-box-sizing:border-box;-webkit-transition:all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;-moz-transition:all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;" tabindex="0" type="button" data-reactid="12"><div data-reactid="13"><span class="material-icons md-36" color="#FF5722" font-size="36px" style="color:#FF5722;position:relative;font-size:24px;display:inline-block;user-select:none;transition:all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-webkit-transition:all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;-moz-transition:all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;" data-reactid="14">menu</span></div></button><div style="display:none;" data-reactid="15"><!-- react-empty: 16 --><!-- react-empty: 17 --></div></div></div></div></header><div class="main-container" data-reactid="18"><div class="content" data-reactid="19"><article data-reactid="20"><h1 data-reactid="21">Learn with LaForest Notes</h1><h3 data-reactid="22"><!-- react-text: 23 -->Author: <!-- /react-text --><!-- react-text: 24 -->Scott LaForest<!-- /react-text --></h3><div data-reactid="25"><h1 id="learn-with-laforest" data-reactid="26"><a href="#learn-with-laforest" class="phenomic-HeadingAnchor" data-reactid="27">#</a><!-- react-text: 28 -->Learn with LaForest<!-- /react-text --></h1><!-- react-text: 29 -->
<!-- /react-text --><p data-reactid="30"><!-- react-text: 31 -->This repository is my first attempt at a progressive web app. This app is my classroom website (I currently teach high school math and engineering). The app is hosted on firebase, <!-- /react-text --><a href="https://learn-with-laforest.firebaseapp.com/" data-reactid="32">Learn with LaForest</a><!-- react-text: 33 -->, for the ease of deployment and data storage as well as PWA requirements of HTTP/2 and HTTPS default on firebase.<!-- /react-text --></p><!-- react-text: 34 -->
<!-- /react-text --><h1 id="trials-and-triumphs" data-reactid="35"><a href="#trials-and-triumphs" class="phenomic-HeadingAnchor" data-reactid="36">#</a><!-- react-text: 37 -->Trials and Triumphs<!-- /react-text --></h1><!-- react-text: 38 -->
<!-- /react-text --><ul data-reactid="39"><!-- react-text: 40 -->
<!-- /react-text --><li data-reactid="41"><!-- react-text: 42 -->Implementing switching between classes via the menu button was my first challenge as I had a hard time getting the <!-- /react-text --><code data-reactid="43">addEventListener()</code><!-- react-text: 44 --> method to work correctly and pass the <!-- /react-text --><code data-reactid="45">this</code><!-- react-text: 46 --> value as well as a parameter. After researching more on the <!-- /react-text --><code data-reactid="47">bind()</code><!-- react-text: 48 --> method I realized that I can add args after the <!-- /react-text --><code data-reactid="49">this</code><!-- react-text: 50 --> parameter which will be prepended to the bound method. So for each menu item I passed the corresponding class name after the <!-- /react-text --><code data-reactid="51">this</code><!-- react-text: 52 --> parameter.  Example<!-- /react-text --></li><!-- react-text: 53 -->
<!-- /react-text --></ul><!-- react-text: 54 -->
<!-- /react-text --><pre data-reactid="55"><code class="language-javascript" data-reactid="56"> this.showAlg1 = document.getElementById(&#x27;showAlg1&#x27;)
 this.showAlg1.addEventListener(&#x27;click&#x27;, this.clickedOn.bind(this, &quot;Alg1&quot;));
</code></pre><!-- react-text: 57 -->
<!-- /react-text --><ul data-reactid="58"><!-- react-text: 59 -->
<!-- /react-text --><li data-reactid="60"><!-- react-text: 61 -->Service-worker: CDNs at getmdl.io are not CORS supported. So I had to manually fetch them and then cache them thanks to the answer here by Jeff Posnick on <!-- /react-text --><a href="https://stackoverflow.com/questions/39109789/what-limitations-apply-to-opaque-responses/39109790#39109790" data-reactid="62">StackOverflow</a><!-- react-text: 63 -->.
Example<!-- /react-text --></li><!-- react-text: 64 -->
<!-- /react-text --></ul><!-- react-text: 65 -->
<!-- /react-text --><pre data-reactid="66"><code class="language-javascript" data-reactid="67">const request = new Request(&#x27;https://code.getmdl.io/1.3.0/material.deep_purple-yellow.min.css&#x27;, {mode: &#x27;no-cors&#x27;});
fetch(request).then(response =&gt; cache.put(request, response));
</code></pre><!-- react-text: 68 -->
<!-- /react-text --><ul data-reactid="69"><!-- react-text: 70 -->
<!-- /react-text --><li data-reactid="71"><!-- react-text: 72 -->
<!-- /react-text --><p data-reactid="73"><!-- react-text: 74 -->Firebase DB- TIL that firebase saves data locally on all firebase clients <!-- /react-text --><a href="https://firebase.google.com/docs/database/web/read-and-write#write_data_offline" data-reactid="75">Firebase offline</a><!-- react-text: 76 --> . I was going to make a fetch then cache fetch event for the firebase databas url but this default functionality seems to work fine for offline.<!-- /react-text --></p><!-- react-text: 77 -->
<!-- /react-text --></li><!-- react-text: 78 -->
<!-- /react-text --><li data-reactid="79"><!-- react-text: 80 -->
<!-- /react-text --><p data-reactid="81">Struggling getting firebase messagine working with topics. First was using API key instead of SERVER_KEY which led to 401 responses. And also needed to prepend key= in the request header for the google iid api. Still receiving empty object for response on checking current topics.</p><!-- react-text: 82 -->
<!-- /react-text --></li><!-- react-text: 83 -->
<!-- /react-text --><li data-reactid="84"><!-- react-text: 85 -->
<!-- /react-text --><p data-reactid="86"><!-- react-text: 87 -->In order to show admin link only to admin (me) I created a child in the firebase db of <!-- /react-text --><code data-reactid="88">isAdmin</code><!-- react-text: 89 -->. The isAdmin child has children nodes for eadh admin id. I can then check the signed in user&#x27;s id against the database.<!-- /react-text --></p><!-- react-text: 90 -->
<!-- /react-text --><pre data-reactid="91"><code class="language-javascript" data-reactid="92">this.database.ref(&#x27;/isAdmin/&#x27;).once(&#x27;value&#x27;).then(function(snapshot) {
  snapshot.forEach(function(childSnapshot) {
        if (childSnapshot.key.replace(/\&quot;/g, &quot;&quot;) === userId) {
          console.log(&quot;isAdmin&quot;);
          document.getElementById(&#x27;showAdmin&#x27;).removeAttribute(&quot;hidden&quot;);
        }
        else{
          document.getElementById(&#x27;showAdmin&#x27;).setAttribute(&#x27;hidden&#x27;, &#x27;true&#x27;);
        }
    });
});
</code></pre><!-- react-text: 93 -->
<!-- /react-text --></li><!-- react-text: 94 -->
<!-- /react-text --></ul></div></article></div></div><footer data-reactid="95"><div class="footer" data-reactid="96"><div data-reactid="97"><!-- react-text: 98 -->Scott LaForest © <!-- /react-text --><!-- react-text: 99 -->2017<!-- /react-text --></div><div data-reactid="100"><!-- react-text: 101 -->Created with ❤ using  <!-- /react-text --><a href="https://phenomic.io/" style="color:inherit;" data-reactid="102">Phenomic</a></div><div data-reactid="103"><!-- react-text: 104 -->Check out the source code  <!-- /react-text --><a href="https://github.com/scottyla19/phenomic-portfolio" style="color:inherit;" data-reactid="105"><i class="fa fa-github" data-reactid="106"></i></a></div></div></footer></div></div><script id="PhenomicHydration" type="text/json">{"collection=posts&id=2017-06-10":{"status":"idle","node":{"date":"2017-01-01","title":"Learn with LaForest Notes","desc":"Notes from my development of my classroom website. Includes service worker, CORS, and firebase gotchas.","tags":"firebase, service-worker","author":"Scott LaForest","posted":"06/10/17","body":{"c":[{"c":[{"c":"#","p":{"href":"#learn-with-laforest","className":"phenomic-HeadingAnchor"},"t":"a"},"Learn with LaForest"],"p":{"id":"learn-with-laforest"},"t":"h1"},"\n",{"c":["This repository is my first attempt at a progressive web app. This app is my classroom website (I currently teach high school math and engineering). The app is hosted on firebase, ",{"c":"Learn with LaForest","p":{"href":"https://learn-with-laforest.firebaseapp.com/"},"t":"a"},", for the ease of deployment and data storage as well as PWA requirements of HTTP/2 and HTTPS default on firebase."],"t":"p"},"\n",{"c":[{"c":"#","p":{"href":"#trials-and-triumphs","className":"phenomic-HeadingAnchor"},"t":"a"},"Trials and Triumphs"],"p":{"id":"trials-and-triumphs"},"t":"h1"},"\n",{"c":["\n",{"c":["Implementing switching between classes via the menu button was my first challenge as I had a hard time getting the ",{"c":"addEventListener()","t":"code"}," method to work correctly and pass the ",{"c":"this","t":"code"}," value as well as a parameter. After researching more on the ",{"c":"bind()","t":"code"}," method I realized that I can add args after the ",{"c":"this","t":"code"}," parameter which will be prepended to the bound method. So for each menu item I passed the corresponding class name after the ",{"c":"this","t":"code"}," parameter.  Example"],"t":"li"},"\n"],"t":"ul"},"\n",{"c":{"c":" this.showAlg1 = document.getElementById('showAlg1')\n this.showAlg1.addEventListener('click', this.clickedOn.bind(this, \"Alg1\"));\n","p":{"className":"language-javascript"},"t":"code"},"t":"pre"},"\n",{"c":["\n",{"c":["Service-worker: CDNs at getmdl.io are not CORS supported. So I had to manually fetch them and then cache them thanks to the answer here by Jeff Posnick on ",{"c":"StackOverflow","p":{"href":"https://stackoverflow.com/questions/39109789/what-limitations-apply-to-opaque-responses/39109790#39109790"},"t":"a"},".\nExample"],"t":"li"},"\n"],"t":"ul"},"\n",{"c":{"c":"const request = new Request('https://code.getmdl.io/1.3.0/material.deep_purple-yellow.min.css', {mode: 'no-cors'});\nfetch(request).then(response => cache.put(request, response));\n","p":{"className":"language-javascript"},"t":"code"},"t":"pre"},"\n",{"c":["\n",{"c":["\n",{"c":["Firebase DB- TIL that firebase saves data locally on all firebase clients ",{"c":"Firebase offline","p":{"href":"https://firebase.google.com/docs/database/web/read-and-write#write_data_offline"},"t":"a"}," . I was going to make a fetch then cache fetch event for the firebase databas url but this default functionality seems to work fine for offline."],"t":"p"},"\n"],"t":"li"},"\n",{"c":["\n",{"c":"Struggling getting firebase messagine working with topics. First was using API key instead of SERVER_KEY which led to 401 responses. And also needed to prepend key= in the request header for the google iid api. Still receiving empty object for response on checking current topics.","t":"p"},"\n"],"t":"li"},"\n",{"c":["\n",{"c":["In order to show admin link only to admin (me) I created a child in the firebase db of ",{"c":"isAdmin","t":"code"},". The isAdmin child has children nodes for eadh admin id. I can then check the signed in user's id against the database."],"t":"p"},"\n",{"c":{"c":"this.database.ref('/isAdmin/').once('value').then(function(snapshot) {\n  snapshot.forEach(function(childSnapshot) {\n        if (childSnapshot.key.replace(/\\\"/g, \"\") === userId) {\n          console.log(\"isAdmin\");\n          document.getElementById('showAdmin').removeAttribute(\"hidden\");\n        }\n        else{\n          document.getElementById('showAdmin').setAttribute('hidden', 'true');\n        }\n    });\n});\n","p":{"className":"language-javascript"},"t":"code"},"t":"pre"},"\n"],"t":"li"},"\n"],"t":"ul"}],"t":"div"}}}}</script><script src="/phenomic.main.js" async=""></script></body></html>